# =======================================================
# Mock API Dockerfile
# =======================================================
# Perustuu Python 3.11 slim -versioon
FROM python:3.11-slim

# =======================================================
# Työhakemisto kontissa
# =======================================================
WORKDIR /app

# =======================================================
# Kopioidaan sovellus
# =======================================================
COPY app.py .

# =======================================================
# Asennetaan Flask ja Gunicorn tuotantokäyttöön
# =======================================================
RUN pip install --no-cache-dir flask gunicorn

# =======================================================
# Portti, johon kontti kuuntelee
# =======================================================
EXPOSE 5000

# =======================================================
# Käynnistetään Flask sovellus Gunicornin kautta
# =======================================================
CMD ["gunicorn", "--workers", "2", "--threads", "2", "--bind", "0.0.0.0:5000", "app:app"]
